import datetime
import requests

def parsePrice():
    r = requests.get("https://graphs2.coinmarketcap.com/currencies/bitcoin/") #this address may change
    marketCap = []
    price_btc = []
    price_usd = []
    volume_usd = []
    market_info = []

    response_data = r.json()

    for data in response_data["market_cap_by_available_supply"]:
        marketCap.append(data)
    print("market cap done")
    for data in response_data["price_btc"]:
        price_btc.append(data)
    print("price btc done")
    for data in response_data["price_usd"]:
        price_usd.append(data)
    print("price USD done")
    for data in response_data["volume_usd"]:
        volume_usd.append(data)
    print("volume done")
    time = 0
    #Convert market info to normal times here
    for USDPricePoints in price_usd:
       #convertTime = int(str(int(USDPricePoints[0]))[:-3])
       date = datetime.datetime.fromtimestamp(USDPricePoints[0]/1e3)
       print(date)

    market_info.append(marketCap)
    market_info.append(price_btc)
    market_info.append(price_usd)
    market_info.append(volume_usd)

    return market_info
